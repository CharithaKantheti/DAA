#include <stdio.h>

int main() {
    int arr[100], n, max_sum = -1000000;

    printf("Enter number of elements: ");
    scanf("%d", &n);

    printf("Enter %d elements:\n", n);
    for (int i = 0; i < n; i++)
        scanf("%d", &arr[i]);

    int low = 0, high = n - 1;
    int stack[100][2];
    int top = -1;

    stack[++top][0] = low;
    stack[top][1] = high;

    while (top >= 0) {
        int l = stack[top][0];
        int h = stack[top][1];
        top--;

        if (l == h) {
            if (arr[l] > max_sum)
                max_sum = arr[l];
            continue;
        }

        int m = (l + h) / 2;
        stack[++top][0] = l;
        stack[top][1] = m;
        stack[++top][0] = m + 1;
        stack[top][1] = h;

        int left_sum = -1000000, sum = 0;
        for (int i = m; i >= l; i--) {
            sum += arr[i];
            if (sum > left_sum)
                left_sum = sum;
        }

        int right_sum = -1000000;
        sum = 0;
        for (int i = m + 1; i <= h; i++) {
            sum += arr[i];
            if (sum > right_sum)
                right_sum = sum;
        }

        int cross_sum = left_sum + right_sum;
        if (cross_sum > max_sum)
            max_sum = cross_sum;
    }

    printf("Maximum subarray sum: %d\n", max_sum);
    return 0;
}
